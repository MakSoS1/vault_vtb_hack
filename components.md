# Описание компонентов (микросервисов)

Проект **Secret Vault** состоит из нескольких микросервисов, каждый из которых выполняет свою задачу. Все сервисы контейнеризованы с помощью Docker и развёрнуты в Kubernetes. Ниже описаны основные компоненты системы.

### 1. Основной API

**Файл деплоймента**: `api-deployment.yaml`  
**Порт**: 8000

Этот сервис отвечает за основную логику приложения, включая управление секретами, взаимодействие с базой данных и шифрование данных. Основной API работает с HTML-шаблонами и конфигурациями, которые монтируются через PVC.

Основные функции:
- Добавление, удаление и обновление секретов.
- Взаимодействие с базой данных для хранения и извлечения секретов.
- Использование шифрования для безопасного хранения данных.

### 2. Сервис конфигурации

**Файл деплоймента**: `config-deployment.yaml`  
**Порт**: 8080

Этот микросервис управляет конфигурациями системы. Он хранит настройки для различных компонентов приложения и предоставляет их другим сервисам через API.

Основные функции:
- Управление конфигурационными файлами.
- Поддержка динамических изменений настроек без остановки системы.

### 3. Сервис шифрования

**Файл деплоймента**: `encryption-deployment.yaml`  
**Порт**: 8001

Этот сервис отвечает за шифрование данных, которые хранятся в системе. Он обеспечивает защиту конфиденциальных данных, таких как пароли и ключи, перед сохранением их в базу данных.

Основные функции:
- Шифрование и дешифрование секретов.
- Управление ключами для шифрования.

### 4. Сервис моделей

**Файл деплоймента**: `models-deployment.yaml`  
**Порт**: 9042 (для взаимодействия с базой данных)

Сервис моделей работает с базой данных Cassandra и управляет сохранением и извлечением данных. Он отвечает за обработку запросов на взаимодействие с базой.

Основные функции:
- Поддержка взаимодействия с базой данных Cassandra.
- Обеспечение доступа к данным для других микросервисов.

### 5. Сервис Seal

**Файл деплоймента**: `seal-deployment.yaml`  
**Порт**: 8081

Этот сервис управляет процессом "распечатывания" хранилища секретов. Он следит за тем, чтобы система была правильно инициирована и готова к работе.

Основные функции:
- Автоматический процесс распечатывания хранилища.
- Управление ключами распечатывания, которые монтируются через PVC.

### 6. Ingress и балансировка нагрузки

**Файл манифеста**: `ingress.yaml`

Этот компонент отвечает за маршрутизацию входящего трафика и балансировку нагрузки между микросервисами. Используется для обеспечения доступа к приложению через HTTP/HTTPS и управления TLS-сертификатами.

Основные функции:
- Управление доступом через HTTP/HTTPS.
- Применение TLS-сертификатов для защиты трафика.

### 7. Горизонтальное масштабирование

**Файл манифеста**: `hpa.yaml`

Горизонтальное масштабирование обеспечивает автоматическое добавление подов при увеличении нагрузки на систему. Это позволяет поддерживать высокую доступность и отказоустойчивость.

Основные функции:
- Автоматическое масштабирование подов в зависимости от загрузки процессора.
- Поддержка от 2 до 10 реплик для основного API.

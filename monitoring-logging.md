# Мониторинг и логирование

В проекте **Secret Vault** реализованы механизмы мониторинга и логирования для отслеживания состояния системы, а также для оперативного реагирования на инциденты. Это позволяет поддерживать стабильную работу сервиса и предотвращать потенциальные сбои.

### 1. Мониторинг

Мониторинг системы обеспечивается с помощью стека **Prometheus** и **Grafana**. Эти инструменты позволяют собирать метрики со всех микросервисов, визуализировать их и настраивать уведомления о проблемах.

- **Prometheus**: Служит для сбора метрик, таких как загрузка CPU, использование памяти, состояние подов и количество запросов к API.
- **Grafana**: Предоставляет удобную визуализацию собранных метрик и позволяет настроить дашборды для отслеживания состояния системы.


### 2. Логирование

Логирование реализовано с помощью **Fluentd** и **Elasticsearch**. Все логи микросервисов собираются через Fluentd и отправляются в Elasticsearch для анализа и хранения. Kibana используется для визуализации логов и проведения поисковых запросов по ним.

- **Fluentd**: Сбор и пересылка логов из подов и сервисов в Elasticsearch.
- **Elasticsearch**: Хранилище логов, в котором можно выполнять быстрый поиск и анализ данных.
- **Kibana**: Визуализация логов, настройка дашбордов и проведение аналитики по логам.

### 3. Пример конфигурации Fluentd

**Файл манифеста**: `fluentd-config.yaml`

Конфигурация Fluentd для пересылки логов в Elasticsearch через порт 9200:

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: fluentd-config
data:
  fluent.conf: |
    <source>
      @type forward
      port 24224
    </source>
    <match **>
      @type elasticsearch
      host elasticsearch
      port 9200
      logstash_format true
    </match>
```

### 4. Уведомления

Для оперативного реагирования на инциденты Grafana позволяет настроить оповещения. Например, можно настроить уведомления при превышении порога использования CPU или памяти.

Пример настройки уведомлений в Grafana:
- Уведомление при загрузке CPU выше 80%.
- Отправка уведомлений в Slack или на электронную почту.
